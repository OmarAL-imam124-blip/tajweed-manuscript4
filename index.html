<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مخطوطة التجويد الذهبية</title>
    <meta name="description" content="مخطوطة التجويد الذهبية: رحلة تفاعلية لتعلم وإتقان أحكام التجويد الأساسية. أداة مثالية لمعلمي وطلاب القرآن الكريم. إعداد: عمر بن عبدالحميد الإمام.">
    <meta name="keywords" content="التجويد, أحكام التجويد, تعلم القرآن, نون ساكنة, مدود, مخارج الحروف, صفات الحروف, عمر الإمام">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Amiri:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-gold: #c5a05d;
            --color-gold-dark: #8c6d37;
            --color-gold-gradient: linear-gradient(145deg, #e7c078, #a9803d);
            --bg-manuscript: #fbf8f0;
            --bg-manuscript-dark: #f5eeda;
            --text-dark: #442a29;
            --border-light: #dcd3bf;
            --ink-red: #8c3a32;
        }
        .high-contrast {
            --bg-manuscript: #000;
            --bg-manuscript-dark: #111;
            --text-dark: #fff;
            --color-gold-dark: #ffeb3b;
            --border-light: #555;
            --ink-red: #ff756b;
        }
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-manuscript);
            color: var(--text-dark);
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }
        .hidden { display: none; }

        .title-font {
            font-family: 'Amiri', serif;
        }

        #islamic-arch-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
            overflow: hidden;
        }

        #islamic-arch-background svg {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }


        .page-transition {
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
        }
        .fade-out {
            opacity: 0 !important;
            transform: translateY(10px);
        }
        
        #intro-page { background-color: transparent; }
        
        #start-btn { 
            background-color: var(--text-dark); 
            color: var(--bg-manuscript); 
            transition: all 0.3s ease;
            box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.1);
            border: 2px solid var(--text-dark);
        }
        #start-btn:hover { 
            transform: scale(1.05); 
            background-color: var(--color-gold-dark);
            border-color: var(--color-gold-dark);
        }
        
        #main-header { 
            background-color: rgba(239, 228, 203, 0.8); 
            backdrop-filter: blur(5px);
            padding: 0.75rem 1rem; 
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); 
            border-bottom: 2px solid var(--border-light);
            position: sticky; 
            top: 0; 
            z-index: 10;
        }
        .high-contrast #main-header {
            background-color: rgba(10, 10, 10, 0.8);
        }

        #main-header .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        #main-header h1 {
            color: var(--color-gold-dark);
        }
        .header-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .header-icon-btn {
            padding: 0.5rem;
            border-radius: 9999px;
            transition: background-color 0.2s;
            color: var(--color-gold-dark);
            cursor: pointer;
        }
        .header-icon-btn:hover {
            background-color: rgba(140, 109, 55, 0.1);
        }
        #search-container {
            position: relative;
        }
        #search-bar {
            position: absolute;
            top: 120%;
            left: 0;
            width: 250px;
            transform-origin: top left;
            transform: scale(0.95) translateY(-10px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease-out;
            z-index: 20;
        }
        #search-bar.active {
            transform: scale(1) translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .main-hub { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; padding: 1rem; max-width: 1200px; margin: 0 auto; }
        @media (min-width: 640px) { .main-hub { gap: 1.5rem; padding: 2rem; } }
        
        .hub-card {
            background-color: rgba(245, 238, 218, 0.8);
            backdrop-filter: blur(5px);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            border: 2px solid var(--border-light);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .hub-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-gold);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .hub-card h2 { font-weight: 700; margin-top: 1rem; color: var(--color-gold-dark); transition: color 0.3s ease;}
        .hub-card:hover h2, .hub-card:hover .icon { color: var(--text-dark); }
        .hub-card p { color: #856d4a; margin-top: 0.5rem; }
        .hub-card .icon { font-size: 3rem; line-height: 1; color: var(--color-gold); transition: color 0.3s ease;}

        .mind-map-container { display: flex; flex-direction: column; align-items: center; padding: 1rem; gap: 1.5rem; }
        .rule-card {
            background-color: var(--bg-manuscript-dark);
            border-radius: 0.75rem;
            border: 1px solid var(--border-light);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
        }
        .rule-card-header {
            padding: 1rem 1.5rem;
            background-color: #e9dcc3;
            border-bottom: 1px solid var(--border-light);
        }
        .rule-card-body {
            padding: 1.5rem;
        }
        .definition-grid { display: flex; flex-wrap: wrap; gap: 2rem; }
        .definition-grid > div { flex: 1; min-width: 200px; }

        .letter-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(50px, 1fr)); gap: 0.75rem; margin-top: 1.5rem; }
        .letter-node {
            background: var(--color-gold-gradient);
            border: 2px solid var(--color-gold-dark);
            box-shadow: inset 0 1px 2px rgba(255,255,255,0.4), 0 2px 4px rgba(0,0,0,0.2);
            border-radius: 50%; width: 55px; height: 55px; display: flex; align-items: center; justify-content: center; font-size: 1.75rem; font-weight: 700; color: white; cursor: pointer; transition: all 0.3s ease-in-out; margin-right: auto; margin-left: auto;
        }
        .letter-node:hover { transform: scale(1.1) translateY(-2px); box-shadow: inset 0 1px 2px rgba(255,255,255,0.4), 0 4px 8px rgba(0,0,0,0.3); }
        .letter-node.active { transform: scale(1.1); filter: brightness(1.1); box-shadow: 0 0 15px var(--color-gold); }
        
        .example-panel { background-color: var(--bg-manuscript); border-radius: 0.75rem; padding: 1.5rem; margin-top: 1.5rem; text-align: right; animation: fadeIn 0.5s ease-in-out; border: 1px solid var(--border-light); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .example-title { font-weight: 700; color: var(--color-gold-dark); margin-bottom: 0.75rem; }
        .example-item { font-size: 1.2rem; font-family: 'Amiri', serif; color: var(--ink-red); padding: 0.5rem 0; display: flex; align-items: center; justify-content: space-between; }
        .audio-icon { cursor: pointer; color: var(--color-gold-dark); margin-right: 1rem; background: none; border: none;}
        .audio-icon:hover { color: var(--text-dark); }
        
        .rule-title { font-size: 2rem; font-weight: 700; text-align: right; color: var(--color-gold-dark); }
        
        .modal-content {
            background-color: var(--bg-manuscript);
            border: 2px solid var(--color-gold);
        }

        .styled-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }
        .styled-table th, .styled-table td {
            border: 1px solid var(--border-light);
            padding: 0.75rem;
            text-align: center;
        }
        .styled-table thead {
            background-color: #e9dcc3;
        }
        .styled-table th {
            color: var(--color-gold-dark);
            font-weight: bold;
        }
        .chapter-nav-btn {
            background-color: var(--color-gold-dark);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .chapter-nav-btn:hover:not(:disabled) {
            background-color: var(--text-dark);
        }
        .chapter-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .practice-verse {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            text-align: center;
            padding: 2rem;
            line-height: 3;
        }
        @media (max-width: 640px) {
            .practice-verse { font-size: 1.75rem; line-height: 2.5; }
        }
        .practice-word {
            cursor: pointer;
            border-bottom: 2px dotted var(--color-gold-dark);
            transition: background-color 0.3s;
            padding: 0 0.2em;
        }
        .practice-word:hover {
            background-color: rgba(197, 160, 93, 0.2);
        }
        .ornament {
            height: 2px;
            background: var(--color-gold-gradient);
            margin: 1rem 0;
        }
        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            cursor: pointer;
            background-color: rgba(0,0,0,0.03);
            border-top: 1px solid var(--border-light);
            padding: 1rem 1.5rem;
        }
        .collapsible-header:hover {
            background-color: rgba(0,0,0,0.06);
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            padding: 0 1.5rem;
        }
        .collapsible-header.active + .collapsible-content {
             padding-bottom: 1.5rem; 
        }
        .toggle-icon {
            font-size: 2rem;
            color: var(--color-gold-dark);
            transition: transform 0.3s ease;
        }
        .collapsible-header.active .toggle-icon {
            transform: rotate(45deg);
        }

        .creator-panel {
            background-color: var(--bg-manuscript-dark);
            border-bottom: 2px solid var(--border-light);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding-top 0.5s ease-out, padding-bottom 0.5s ease-out;
            padding-top: 0;
            padding-bottom: 0;
        }
        .creator-panel.open {
            max-height: 500px;
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
        }
        #creator-info-toggle {
             transition: transform 0.3s ease, background-color 0.2s ease;
        }
        #creator-info-toggle.active {
            background-color: rgba(140, 109, 55, 0.2);
            transform: rotate(180deg);
        }

        .wheel-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 2rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #spinner {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid var(--color-gold-dark);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            background-image: conic-gradient(
                #fbf8f0 0deg 36deg, #f5eeda 36deg 72deg,
                #fbf8f0 72deg 108deg, #f5eeda 108deg 144deg,
                #fbf8f0 144deg 180deg, #f5eeda 180deg 216deg,
                #fbf8f0 216deg 252deg, #f5eeda 252deg 288deg,
                #fbf8f0 288deg 324deg, #f5eeda 324deg 360deg
            );
            transition: transform 4s cubic-bezier(0.3, 1, 0.7, 1);
        }
        .arrow {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 25px solid var(--ink-red);
            z-index: 10;
        }
        #spin-btn {
            background-color: var(--text-dark);
            color: var(--bg-manuscript);
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid var(--text-dark);
        }
        #spin-btn:hover {
            background-color: var(--color-gold-dark);
            border-color: var(--color-gold-dark);
            transform: scale(1.05);
        }
        #spin-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .option-btn {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-top: 0.5rem;
            background-color: var(--bg-manuscript);
            border: 2px solid var(--border-light);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: right;
        }
        .option-btn:hover:not(:disabled) {
            border-color: var(--color-gold);
            background-color: var(--bg-manuscript-dark);
        }
        .option-btn:disabled {
            cursor: not-allowed;
        }

        #custom-toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-dark);
            color: var(--bg-manuscript);
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
        }
        #custom-toast.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -10px);
        }
    </style>
</head>
<body>
    <div id="islamic-arch-background">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 1024" preserveAspectRatio="xMidYMin slice">
            <defs>
                <linearGradient id="bgGradient" x1="0.5" y1="0" x2="0.5" y2="1">
                    <stop offset="0%" stop-color="#f5eeda" />
                    <stop offset="100%" stop-color="#fbf8f0" />
                </linearGradient>
                <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                    <feDropShadow dx="0" dy="5" stdDeviation="5" flood-color="#000000" flood-opacity="0.3"/>
                </filter>
            </defs>
            <rect width="100%" height="100%" fill="url(#bgGradient)" />
            <path d="M-10,0 H1450 V200 C1200,150 1000,250 720,250 C440,250 240,150 -10,200 V0 Z" fill="#442a29" />
            <path d="M-10,0 H1450 V180 C1200,130 1000,230 720,230 C440,230 240,130 -10,180 V0 Z" fill="#c5a05d" />
            <path d="M-10,0 H1450 V160 C1200,110 1000,210 720,210 C440,210 240,110 -10,160 V0 Z" fill="#442a29" />

            <path filter="url(#shadow)" d="M720,550 C500,550 350,400 300,150 H1140 C1090,400 940,550 720,550 Z" fill="#fbf8f0"/>
            <path d="M720,520 C550,520 420,420 380,200 H1060 C1020,420 890,520 720,520 Z" fill="#f5eeda"/>
            <path d="M720,500 C600,500 500,450 450,250 H990 C940,450 840,500 720,500 Z" fill="#c5a05d" opacity="0.5"/>
            <path d="M720,480 C686,480 656,474 628,462 C638,410 674,350 720,350 C766,350 802,410 812,462 C784,474 754,480 720,480 Z" fill="#fbf8f0"/>
        </svg>
    </div>
    
    <div id="intro-page" class="flex flex-col items-center justify-center min-h-screen text-center p-6 relative page-transition">
        <div class="max-w-3xl">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 title-font" style="color: var(--color-gold-dark);">مخطوطة التجويد الذهبية</h1>
            <p class="text-lg md:text-xl text-amber-900 mb-8 max-w-2xl mx-auto">
                أداة تعليمية شاملة تغطي أبواب التجويد الأساسية. مصممة لتكون خير معين لمعلمي القرآن في شرح الأحكام، وأفضل رفيق للطلاب في مذاكرتها وإتقانها.
            </p>
            <button id="start-btn" class="text-xl font-bold py-3 px-8 rounded-full">
                ابدأ رحلة التعلم
            </button>
        </div>
        <div class="absolute bottom-5 text-center w-full text-amber-800 text-sm">
            <p lang="en" dir="ltr">Project by: Omar Abdelhamid AL-imam</p>
        </div>
    </div>
    
    <div id="main-content-area" class="hidden page-transition">
        <header id="main-header" class="p-2 md:p-3">
            <div class="header-content">
                 <div class="header-controls">
                     <button id="back-to-intro-btn" title="العودة للبداية" class="header-icon-btn">
                         <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.47 3.84a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-.69-.69V21a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75v6a.75.75 0 0 1-.75.75H6a.75.75 0 0 1-.75-.75V11.71l-.69.69a.75.75 0 0 1-1.06-1.06l7.5-7.5Z" /></svg>
                     </button>
                 </div>
                 <div class="flex-1 text-center px-2">
                     <h1 class="text-xl md:text-2xl font-bold title-font">مخطوطة التجويد الذهبية</h1>
                     <p class="mt-1 text-sm text-amber-900/80 hidden md:block">
                         إن لم تفهم قاعدة ما، فهذا الرابط هو مرجعك لسماع شرحها بالتفصيل: 
                         <a href="https://youtube.com/playlist?list=PLJi21Zen45zQ-p3e38-Wb94LhDKIZ7sac&si=_E8KBiY304HEkqw3" target="_blank" rel="noopener noreferrer" class="font-bold underline hover:text-amber-700 transition-colors">
                             اضغط هنا
                         </a>
                     </p>
                 </div>
                 <div class="header-controls">
                     <div id="search-container">
                         <button id="search-btn" title="بحث" class="header-icon-btn">
                             <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 2a8 8 0 1 0 5.293 14.293l4.414 4.414a1 1 0 0 0 1.414-1.414l-4.414-4.414A8 8 0 0 0 10 2Zm0 2a6 6 0 1 1 0 12A6 6 0 0 1 10 4Z"/></svg>
                         </button>
                         <input type="search" id="search-bar" placeholder="ابحث..." class="p-2 rounded-md border-2 bg-white/80 border-amber-800/20 focus:border-amber-600 focus:ring-0 text-amber-900 placeholder-amber-900/50">
                     </div>
                     <button id="increase-font" title="تكبير الخط" class="header-icon-btn text-lg font-bold">A+</button>
                     <button id="decrease-font" title="تصغير الخط" class="header-icon-btn text-sm font-bold">A-</button>
                     <button id="contrast-toggle" title="وضع التباين" class="header-icon-btn">
                          <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.106a.75.75 0 0 1 0 1.06l-1.591 1.59a.75.75 0 1 1-1.06-1.061l1.59-1.591a.75.75 0 0 1 1.061 0ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5h2.25a.75.75 0 0 1 .75.75ZM17.894 17.894a.75.75 0 0 1-1.06 0l-1.59-1.591a.75.75 0 1 1 1.06-1.06l1.591 1.59a.75.75 0 0 1 0 1.061ZM12 18a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.894a.75.75 0 0 1 0-1.06l1.59-1.591a.75.75 0 1 1 1.061 1.06l-1.59 1.591a.75.75 0 0 1-1.061 0ZM6.106 7.167a.75.75 0 0 1 1.06 0l1.591 1.59a.75.75 0 0 1-1.06 1.061L6.106 8.227a.75.75 0 0 1 0-1.061ZM3 12a.75.75 0 0 1 .75-.75h2.25a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Z" /></svg>
                     </button>
                     <div class="flex flex-col items-center -space-y-1">
                        <button id="creator-info-toggle" title="عن المُعِدّ" class="header-icon-btn">
                           <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                               <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0V9Zm-1.5-1.5a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H12a.75.75 0 0 1-.75-.75V7.5Z" clip-rule="evenodd"></path>
                           </svg>
                        </button>
                        <span class="text-[10px]" style="color: var(--text-dark);">لمحة عن المُعِدّ</span>
                    </div>
                 </div>
            </div>
        </header>

        <div id="creator-info-panel" class="creator-panel">
            <div class="p-4 md:p-6 max-w-4xl mx-auto">
                 <div class="text-right text-base md:text-lg space-y-3" style="color: var(--text-dark);">
                    <p class="font-bold text-xl md:text-2xl title-font text-center mb-2">عمر بن عبدالحميد الإمام</p>
                    <p class="text-center text-sm -mt-2 mb-4">مصري الجنسية</p>
                    <p><strong class="font-semibold" style="color: var(--color-gold-dark);">الإجازة:</strong> مجاز بقراءة الإمام عاصم الكوفي براوييه شعبة وحفص من طريق الشاطبية.</p>
                    <p><strong class="font-semibold" style="color: var(--color-gold-dark);">العمل:</strong> معلم أساسي في مدرسة القرآن الكريم.</p>
                    <p><strong class="font-semibold" style="color: var(--color-gold-dark);">دوره:</strong> صاحب فكرة ومحتوى هذه المخطوطة التعليمية، سعى لجعل تعلم التجويد رحلة ميسرة وممتعة.</p>
                 </div>
                <div class="text-center">
                     <a href="https://wa.me/201003328748" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 mt-4 text-base bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition-colors shadow-md hover:shadow-lg transform hover:scale-105">
                         <span>تواصل عبر واتساب</span>
                         <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16.6,14.2l-1.5-0.8c-0.4-0.2-1-0.1-1.3,0.2L12.5,15c-1.5-0.8-2.8-2.1-3.5-3.5l1.1-1.3c0.3-0.3,0.4-0.9,0.2-1.3 l-0.8-1.5c-0.2-0.5-0.8-0.8-1.4-0.6L4.8,7.3C4.3,7.4,4,7.9,4,8.5c0,5.8,4.7,10.5,10.5,10.5c0.6,0,1.1-0.3,1.3-0.8l0.6-1.9 C17.4,15,17.1,14.4,16.6,14.2z M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z"></svg>
                     </a>
                </div>
            </div>
        </div>

        <div id="main-content-body">
            <!-- Content will be injected here -->
        </div>

    </div>

    <div id="chapter-content" class="hidden page-transition">
        <button id="back-to-hub" class="fixed top-4 right-4 z-50 flex h-12 w-12 items-center justify-center rounded-full bg-white/50 backdrop-blur-sm border border-white/20 text-gray-800 shadow-lg transition-transform hover:scale-110 hover:bg-white/70">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
        </button>
        <div id="chapter-body"></div>
        <div id="chapter-nav" class="flex justify-between w-full max-w-5xl mx-auto p-4 md:p-8">
            <button id="prev-chapter-btn" class="chapter-nav-btn"> الباب السابق &rarr; </button>
            <button id="next-chapter-btn" class="chapter-nav-btn"> &larr; الباب التالي </button>
        </div>
    </div>
    
    <div id="all-content" class="hidden">
        <div id="footer-template">
            <footer class="text-center py-6 mt-10 border-t-2" style="border-color: var(--border-light);">
                <p class="mb-4">انشر هذا العلم وشارك الأجر</p>
                <div class="flex justify-center gap-4">
                    <a id="share-whatsapp" href="#" class="p-3 rounded-full bg-green-500 text-white hover:bg-green-600 transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16.6,14.2l-1.5-0.8c-0.4-0.2-1-0.1-1.3,0.2L12.5,15c-1.5-0.8-2.8-2.1-3.5-3.5l1.1-1.3c0.3-0.3,0.4-0.9,0.2-1.3 l-0.8-1.5c-0.2-0.5-0.8-0.8-1.4-0.6L4.8,7.3C4.3,7.4,4,7.9,4,8.5c0,5.8,4.7,10.5,10.5,10.5c0.6,0,1.1-0.3,1.3-0.8l0.6-1.9 C17.4,15,17.1,14.4,16.6,14.2z M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z"/></svg>
                    </a>
                     <a id="share-facebook" href="#" class="p-3 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors">
                         <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22,12c0-5.52-4.48-10-10-10S2,6.48,2,12c0,4.84,3.44,8.87,8,9.8V15H8v-3h2V9.5C10,7.57,11.57,6,13.5,6H16v3h-1.5 C13.67,9,13,9.67,13,10.5V12h3l-0.5,3h-2.5v6.8C18.56,20.87,22,16.84,22,12z"/></svg>
                    </a>
                </div>
            </footer>
        </div>
        <div id="main-content-template">
            <div class="px-4 md:px-8 py-6 max-w-5xl mx-auto">
                 <div class="rule-card">
                     <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">ما هو علم التجويد؟</h2></div>
                     <div class="rule-card-body">
                         <div class="definition-grid text-lg">
                              <div>
                                 <h3 class="font-bold text-xl mb-2 title-font" style="color: var(--color-gold-dark);">لغةً:</h3>
                                 <p>التحسين والإتقان.</p>
                              </div>
                              <div>
                                 <h3 class="font-bold text-xl mb-2 title-font" style="color: var(--color-gold-dark);">اصطلاحًا:</h3>
                                 <p>إخراج كل حرف من مخرجه، مع إعطائه حقه ومستحقه.</p>
                              </div>
                         </div>
                         <div class="border-t border-amber-200/20 mt-6 pt-6">
                             <h3 class="rule-title text-xl md:text-2xl">ما حكمه؟</h3>
                             <div class="definition-grid text-lg">
                                  <div>
                                     <h4 class="font-bold text-xl mb-2 title-font" style="color: var(--color-gold-dark);">العمل به (التلاوة):</h4>
                                     <p>فرض عين على كل مسلم ومسلمة عند قراءة القرآن.</p>
                                  </div>
                                  <div>
                                     <h4 class="font-bold text-xl mb-2 title-font" style="color: var(--color-gold-dark);">العلم به (الدراسة):</h4>
                                     <p>فرض كفاية، إذا قام به من يكفي سقط الإثم عن الباقين.</p>
                                  </div>
                             </div>
                         </div>
                     </div>
                 </div>
            </div>
            <div class="text-center pt-8">
                <h2 class="rule-title text-3xl md:text-4xl">الفهرس</h2>
            </div>
            <div id="main-hub" class="main-hub p-4 md:p-8 gap-4 md:gap-6">
                <div class="hub-card p-4 md:p-6" data-target="noon-sakinah-section">
                    <div class="card-content">
                       <div class="icon">ن</div>
                       <h2 class="title-font text-xl mt-4">أحكام النون الساكنة والتنوين</h2>
                       <p class="text-sm mt-2">تعلم قواعد الإظهار، الإدغام، الإقلاب، والإخفاء.</p>
                   </div>
               </div>
               <div class="hub-card p-4 md:p-6" data-target="meem-sakinah-section">
                   <div class="card-content">
                       <div class="icon">مْ</div>
                       <h2 class="title-font text-xl mt-4">أحكام الميم الساكنة</h2>
                       <p class="text-sm mt-2">اكتشف قواعد الإخفاء والإدغام والإظهار الشفوي.</p>
                   </div>
               </div>
               <div class="hub-card p-4 md:p-6" data-target="madd-section">
                   <div class="card-content">
                       <div class="icon">ـا</div>
                       <h2 class="title-font text-xl mt-4">باب المدود</h2>
                       <p class="text-sm mt-2">تعرف على أنواع المد الطبيعي والفرعي وأزمنتها.</p>
                   </div>
               </div>
               <div class="hub-card p-4 md:p-6" data-target="sifaat-section">
                   <div class="card-content">
                       <div class="icon">ص</div>
                       <h2 class="title-font text-xl mt-4">صفات الحروف</h2>
                       <p class="text-sm mt-2">ادرس الصفات التي تميز كل حرف عن الآخر.</p>
                   </div>
               </div>
               <div class="hub-card p-4 md:p-6" data-target="makharij-section">
                    <div class="card-content">
                       <div class="icon">م</div>
                       <h2 class="title-font text-xl mt-4">مخارج الحروف</h2>
                       <p class="text-sm mt-2">تعلم الموضع الدقيق لنطق كل حرف من حروف الهجاء.</p>
                   </div>
               </div>
               <div class="hub-card p-4 md:p-6" data-target="waqf-section">
                    <div class="card-content">
                       <div class="icon">ف</div>
                       <h2 class="title-font text-xl mt-4">باب الوقف والابتداء</h2>
                       <p class="text-sm mt-2">تعلم متى تقف وكيف تبدأ التلاوة بشكل صحيح.</p>
                   </div>
               </div>
               <div class="hub-card p-4 md:p-6" data-target="relations-section">
                    <div class="card-content">
                       <div class="icon">ل</div>
                       <h2 class="title-font text-xl mt-4">علاقات الحروف</h2>
                       <p class="text-sm mt-2">ادرس أحكام المثلين والمتقاربين والمتجانسين.</p>
                   </div>
               </div>
               <div class="hub-card p-4 md:p-6" data-target="practice-section">
                    <div class="card-content">
                       <div class="icon">📖</div>
                       <h2 class="title-font text-xl mt-4">التطبيق العملي</h2>
                       <p class="text-sm mt-2">استخرج الأحكام بنفسك من آيات قرآنية.</p>
                   </div>
               </div>
                 <div class="hub-card p-4 md:p-6" data-target="quiz-section">
                     <div class="card-content">
                         <div class="icon">؟</div>
                         <h2 class="title-font text-xl mt-4">الاختبار الشامل</h2>
                         <p class="text-sm mt-2">اختبر معلوماتك في جميع أبواب التجويد بطريقة ممتعة.</p>
                     </div>
                 </div>
            </div>
        </div>
        <div id="noon-sakinah-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="node text-center"> <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">أحكام النون الساكنة والتنوين</h1> <p class="text-gray-400">هي نون خالية من الحركة، أو تنوين يلحق آخر الأسماء</p> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">1. الإظهار الحلقي</h2></div> <div class="rule-card-body"> <div class="definition-grid"> <div><h3 class="font-bold text-lg mb-2">لغةً:</h3><p>البيان والوضوح.</p></div> <div><h3 class="font-bold text-lg mb-2">اصطلاحًا:</h3><p>إخراج النون أو التنوين بوضوح تام بغير غنة.</p></div> </div> <div class="mt-4 pt-4 border-t border-amber-200/20"> <h3 class="font-bold text-lg mb-2 text-center">حروفه (6):</h3> <div class="letter-grid"> <div class="letter-node" data-letter="hamza" data-parent="noon">ء</div> <div class="letter-node" data-letter="haa" data-parent="noon">هـ</div> <div class="letter-node" data-letter="ain" data-parent="noon">ع</div> <div class="letter-node" data-letter="ha" data-parent="noon">ح</div> <div class="letter-node" data-letter="ghain" data-parent="noon">غ</div> <div class="letter-node" data-letter="khaa" data-parent="noon">خ</div> </div> <div class="examples-container"></div> </div> </div> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">2. الإدغام</h2></div> <div class="rule-card-body"> <div class="definition-grid"> <div><h3 class="font-bold text-lg mb-2">لغةً:</h3><p>الإدخال والمزج.</p></div> <div><h3 class="font-bold text-lg mb-2">اصطلاحًا:</h3><p>إدخال النون أو التنوين بحرف من حروف الإدغام ليصيرا حرفًا واحدًا مشددًا.</p></div> </div> <div class="mt-4 pt-4 border-t border-amber-200/20"> <h3 class="font-bold text-lg mb-2 text-center">حروفه (6) "يرملون":</h3> <h4 class="font-semibold mt-4 text-center">أ. بغنة (ينمو):</h4> <div class="letter-grid"> <div class="letter-node" data-letter="yaa" data-parent="noon">ي</div> <div class="letter-node" data-letter="noun" data-parent="noon">n</div> <div class="letter-node" data-letter="mim" data-parent="noon">م</div> <div class="letter-node" data-letter="waw" data-parent="noon">و</div> </div> <h4 class="font-semibold mt-4 text-center">ب. بلا غنة:</h4> <div class="letter-grid grid-cols-2 max-w-xs mx-auto"> <div class="letter-node" data-letter="lam" data-parent="noon">ل</div> <div class="letter-node" data-letter="raa" data-parent="noon">ر</div> </div> <div class="examples-container"></div> </div> </div> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">3. الإقلاب</h2></div> <div class="rule-card-body"> <div class="definition-grid"> <div><h3 class="font-bold text-lg mb-2">لغةً:</h3><p>تحويل الشيء عن وجهه.</p></div> <div><h3 class="font-bold text-lg mb-2">اصطلاحًا:</h3><p>قلب النون أو التنوين ميمًا مخفاة بغنة عند ملاقاة الباء.</p></div> </div> <div class="mt-4 pt-4 border-t border-amber-200/20"> <h3 class="font-bold text-lg mb-2 text-center">حرفه الوحيد:</h3> <div class="letter-grid grid-cols-1 max-w-[80px] mx-auto"> <div class="letter-node" data-letter="baa" data-parent="noon">ب</div> </div> <div class="examples-container"></div> </div> </div> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">4. الإخفاء الحقيقي</h2></div> <div class="rule-card-body"> <div class="definition-grid"> <div><h3 class="font-bold text-lg mb-2">لغةً:</h3><p>الستر.</p></div> <div><h3 class="font-bold text-lg mb-2">اصطلاحًا:</h3><p>النطق بالنون أو التنوين بحالة بين الإظهار والإدغام، مع بقاء الغنة.</p></div> </div> <div class="mt-4 pt-4 border-t border-amber-200/20"> <h3 class="font-bold text-lg mb-2 text-center">حروفه (15):</h3> <div class="letter-grid"> <div class="letter-node" data-letter="sad" data-parent="noon">ص</div> <div class="letter-node" data-letter="thal" data-parent="noon">ذ</div> <div class="letter-node" data-letter="thaa" data-parent="noon">ث</div> <div class="letter-node" data-letter="kaf" data-parent="noon">ك</div> <div class="letter-node" data-letter="jim" data-parent="noon">ج</div> <div class="letter-node" data-letter="shin" data-parent="noon">ش</div> <div class="letter-node" data-letter="qaf" data-parent="noon">ق</div> <div class="letter-node" data-letter="sin" data-parent="noon">س</div> <div class="letter-node" data-letter="dal" data-parent="noon">د</div> <div class="letter-node" data-letter="tah" data-parent="noon">ط</div> <div class="letter-node" data-letter="zay" data-parent="noon">ز</div> <div class="letter-node" data-letter="faa" data-parent="noon">ف</div> <div class="letter-node" data-letter="taa" data-parent="noon">ت</div> <div class="letter-node" data-letter="dhad" data-parent="noon">ض</div> <div class="letter-node" data-letter="dhaa" data-parent="noon">ظ</div> </div> <div class="examples-container"></div> </div> </div> </div> </div> </div>
        <div id="meem-sakinah-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="node text-center"> <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">أحكام الميم الساكنة</h1> <p class="text-gray-400">هي ميم خالية من الحركة تأتي قبل جميع الحروف ما عدا الألف.</p> </div> <div class="rule-card"><div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">1. الإخفاء الشفوي</h2></div><div class="rule-card-body"><div class="definition-grid"><div><h3 class="font-bold text-lg mb-2">اصطلاحًا:</h3><p>النطق بالميم الساكنة بحالة بين الإظهار والإدغام مع بقاء الغنة، عند ملاقاة حرف الباء.</p></div></div><div class="mt-4 pt-4 border-t border-amber-200/20"><h3 class="font-bold text-lg mb-2 text-center">حرفه الوحيد:</h3><div class="letter-grid grid-cols-1 max-w-[80px] mx-auto"><div class="letter-node" data-letter="baa-meem" data-parent="meem">ب</div></div><div class="examples-container"></div></div></div></div> <div class="rule-card"><div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">2. الإدغام الشفوي</h2></div><div class="rule-card-body"><div class="definition-grid"><div><h3 class="font-bold text-lg mb-2">اصطلاحًا:</h3><p>إدخال الميم الساكنة في الميم المتحركة التي تليها، ليصيرا ميماً واحدة مشددة مع غنة.</p></div></div><div class="mt-4 pt-4 border-t border-amber-200/20"><h3 class="font-bold text-lg mb-2 text-center">حرفه الوحيد:</h3><div class="letter-grid grid-cols-1 max-w-[80px] mx-auto"><div class="letter-node" data-letter="mim-meem" data-parent="meem">م</div></div><div class="examples-container"></div></div></div></div> <div class="rule-card"><div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">3. الإظهار الشفوي</h2></div><div class="rule-card-body"><div class="definition-grid"><div><h3 class="font-bold text-lg mb-2">اصطلاحًا:</h3><p>إخراج الميم الساكنة من مخرجها بوضوح تام بغير غنة، عند ملاقاة باقي الحروف (26 حرفًا).</p></div></div><div class="mt-4 pt-4 border-t border-amber-200/20"><h3 class="font-bold text-lg mb-2 text-center">أمثلة مع حروف مختلفة:</h3><div class="examples-container text-right text-lg md:text-xl"><div class="example-item">"أَ<strong>مْ لَ</strong>هُمْ"</div><div class="example-item">"لَكُ<strong>مْ دِ</strong>ينُكُمْ"</div><div class="example-item">"وَهُ<strong>مْ فِ</strong>يهَا"</div></div></div></div></div> </div> </div>
        <div id="madd-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="node text-center"> <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">باب المدود</h1> <p class="text-gray-400">المد لغةً: الزيادة. واصطلاحًا: إطالة الصوت بحرف من حروف المد.</p> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">المد الطبيعي (الأصلي)</h2></div> <div class="rule-card-body"> <p>هو المد الذي لا تقوم ذات الحرف إلا به، ولا يتوقف على سبب (همز أو سكون). ومقداره حركتان.</p> <p class="mt-2"><strong>حروفه:</strong> الألف الساكنة المفتوح ما قبلها، الواو الساكنة المضموم ما قبلها، الياء الساكنة المكسور ما قبلها.</p> <div class="examples-container mt-4 text-lg md:text-xl"> <div class="example-item">"قَ<strong>ا</strong>لَ"</div> <div class="example-item">"يَقُ<strong>و</strong>لُ"</div> <div class="example-item">"قِ<strong>ي</strong>لَ"</div> </div> </div> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">المد الفرعي</h2></div> <div class="rule-card-body"> <p>هو المد الزائد عن المد الطبيعي، ويكون بسبب همز أو سكون.</p> <div class="collapsible-header"><h3 class="text-xl font-bold title-font" style="color: var(--text-dark);">المد بسبب الهمز</h3><span class="toggle-icon">+</span></div> <div class="collapsible-content"> <div class="mt-4"> <h4>1. المد المتصل (واجب)</h4> <p>أن يأتي حرف المد وبعده همزة في نفس الكلمة. يمد 4 أو 5 حركات.</p> <div class="examples-container text-lg md:text-xl"> <div class="example-item">"السَّمَ<strong>اء</strong>"</div> <div class="example-item">"جِ<strong>يء</strong>"</div> <div class="example-item">"سُ<strong>وء</strong>"</div> </div> </div> <div class="mt-4"> <h4>2. المد المنفصل (جائز)</h4> <p>أن يأتي حرف المد في آخر الكلمة، والهمزة في أول الكلمة التالية. يمد 4 أو 5 حركات.</p> <div class="examples-container text-lg md:text-xl"> <div class="example-item">"يَ<strong>ا أ</strong>يُّهَا"</div> <div class="example-item">"قُ<strong>وا أ</strong>نفُسَكُمْ"</div> <div class="example-item">"فِ<strong>ي أ</strong>َنفُسِهِمْ"</div> </div> </div> <div class="mt-4"> <h4>3. مد البدل</h4> <p>هو كل همز ممدود. أصله همزتان، الأولى متحركة والثانية ساكنة، فأُبدلت الثانية حرف مد. يمد حركتين.</p> <div class="examples-container text-lg md:text-xl"> <div class="example-item">"<strong>آ</strong>مَنُوا" (أصلها أَأْمَنُوا)</div> <div class="example-item">"<strong>أُو</strong>تُوا" (أُؤْتُوا)</div> <div class="example-item">"<strong>إي</strong>مَانًا" (إِئْمَانًا)</div> </div> </div> </div> <div class="collapsible-header"><h3 class="text-xl font-bold title-font" style="color: var(--text-dark);">المد بسبب السكون</h3><span class="toggle-icon">+</span></div> <div class="collapsible-content"> <div class="mt-4"> <h4>1. المد العارض للسكون</h4> <p>أن يأتي بعد حرف المد حرف ساكن سكونًا عارضًا بسبب الوقف. يمد 2 أو 4 أو 6 حركات.</p> <div class="examples-container text-lg md:text-xl"> <div class="example-item">"الْعَالَمِ<strong>ينْ</strong>"</div> <div class="example-item">"تَعْلَمُ<strong>ونْ</strong>"</div> <div class="example-item">"الْمَ<strong>آبْ</strong>"</div> </div> </div> <div class="mt-4"> <h4>2. مد اللين</h4> <p>أن تأتي واو أو ياء ساكنتان مفتوح ما قبلهما وبعدهما سكون عارض للوقف. يمد 2 أو 4 أو 6 حركات.</p> <div class="examples-container text-lg md:text-xl"> <div class="example-item">"خَ<strong>وْ</strong>ف"</div> <div class="example-item">"البَ<strong>يْ</strong>ت"</div> <div class="example-item">"قُرَ<strong>يْ</strong>ش"</div> </div> </div> <div class="mt-4"> <h4>3. المد اللازم</h4> <p>أن يأتي بعد حرف المد سكون أصلي (ثابت وصلاً ووقفاً). يمد 6 حركات.</p> <div class="examples-container text-lg md:text-xl"> <div class="example-item">"ال<strong>ضَّآ</strong>لِّين"</div> <div class="example-item">"<strong>الْآن</strong>"</div> <div class="example-item">"<strong>قآ</strong>ف"</div> <div class="example-item">"<strong>نآ</strong>"</div> </div> </div> </div> </div> </div> </div> </div>
        <div id="sifaat-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="node text-center"> <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">صفات الحروف</h1> <p class="text-gray-400">الكيفية التي تخرج بها الحروف عند النطق بها لتمييزها عن بعضها.</p> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">صفات لها ضد</h2></div> <div class="rule-card-body"> <table class="styled-table text-sm md:text-base"><thead><tr><th>الصفة</th><th>ضدها</th><th>الحروف</th></tr></thead><tbody><tr><td>الهمس</td><td>الجهر</td><td>فحثه شخص سكت</td></tr><tr><td>الشدة</td><td>الرخاوة</td><td>أجد قط بكت</td></tr><tr><td>(التوسط)</td><td>-</td><td>لن عمر</td></tr><tr><td>الاستعلاء</td><td>الاستفال</td><td>خص ضغط قظ</td></tr><tr><td>الإطباق</td><td>الانفتاح</td><td>ص ض ط ظ</td></tr><tr><td>الإذلاق</td><td>الإصمات</td><td>فر من لب</td></tr></tbody></table> </div> </div> <div class="rule-card"> <div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">صفات لا ضد لها</h2></div> <div class="rule-card-body"> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-base"> <div><h4><strong>الصفير:</strong> صوت زائد يشبه صوت الطائر. (ص ز س)</h4></div> <div><h4><strong>القلقلة:</strong> اضطراب المخرج عند النطق بالحرف ساكناً. (قطب جد)</h4></div> <div><h4><strong>اللين:</strong> إخراج الحرف بسهولة. (الواو والياء الساكنتان المفتوح ما قبلهما)</h4></div> <div><h4><strong>الانحراف:</strong> ميل الحرف عن مخرجه. (ل ر)</h4></div> <div><h4><strong>التكرير:</strong> ارتعاد رأس اللسان عند النطق بالحرف. (ر)</h4></div> <div><h4><strong>التفشي:</strong> انتشار الهواء في الفم. (ش)</h4></div> <div><h4><strong>الاستطالة:</strong> امتداد الصوت من أول حافة اللسان لآخرها. (ض)</h4></div> </div> </div> </div> </div> </div>
        <div id="makharij-section" class="page-section hidden">
            <div class="mind-map-container p-4 md:p-8">
                <div class="node text-center">
                    <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">📘 مَـخَارجُ الحُروف</h1>
                    <p style="color: var(--text-dark);">علم التجويد</p>
                </div>
        
                <!-- Definition and Letter Count -->
                <div class="rule-card">
                    <div class="rule-card-body">
                        <h3 class="font-bold text-xl mb-2 title-font" style="color: var(--color-gold-dark);">🔹 تعريف المخرج</h3>
                        <p>المَخرج هو الموضع الذي يخرج منه الحرف عند النطق به، بحيث يُعطى كل حرف حقَّه ومستحقَّه من الصفات الصوتية.</p>
                        <div class="ornament my-4"></div>
                        <h3 class="font-bold text-xl mb-2 title-font" style="color: var(--color-gold-dark);">🔹 عدد حروف اللغة العربية</h3>
                        <ul class="list-disc pr-6 space-y-2">
                            <li><strong>الحروف الأصلية:</strong> 28 حرفًا (تبدأ بالهمزة 'أ' وتنتهي بالياء 'ي')</li>
                            <li><strong>حروف المد:</strong> 3 حروف (ا, و, ي)</li>
                            <li><strong>صفة الغنّة:</strong> 1 (تضاف كصفة مستقلة للنون والميم)</li>
                        </ul>
                        <p class="mt-4 font-bold text-center text-lg">إجمالي الحروف: 28 + 3 + 1 = 32 حرفًا</p>
                    </div>
                </div>
        
                <!-- Main Makharij Summary -->
                <div class="rule-card">
                    <div class="rule-card-header">
                        <h2 class="rule-title text-2xl md:text-3xl">🕌 المخارج الأساسية للحروف (5)</h2>
                    </div>
                    <div class="rule-card-body">
                        <div class="overflow-x-auto">
                            <table class="styled-table text-sm md:text-base">
                                <thead>
                                    <tr>
                                        <th>الرقم</th>
                                        <th>المخرج الأساسي</th>
                                        <th>عدد الحروف</th>
                                        <th>أمثلة</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>1</td><td>الجوف</td><td>3</td><td>حروف المد (ا، و، ي)</td></tr>
                                    <tr><td>2</td><td>الحلق</td><td>6</td><td>(أ، هـ، ع، ح، غ، خ)</td></tr>
                                    <tr><td>3</td><td>اللسان</td><td>18</td><td>(ق، ك، ج، ش، ي...)</td></tr>
                                    <tr><td>4</td><td>الشفتان</td><td>4</td><td>(ف، ب، م، و)</td></tr>
                                    <tr><td>5</td><td>الخيشوم</td><td>1</td><td>الغنّة (ن، م)</td></tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="2" class="font-bold">المجموع الكلي</td>
                                        <td colspan="2" class="font-bold">32 حرفًا</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Detailed Makharij as Collapsibles -->
                <div class="rule-card">
                    <div class="collapsible-header"><h3 class="text-xl font-bold title-font" style="color: var(--text-dark);">📍 أولًا: مخرج الجوف</h3><span class="toggle-icon">+</span></div>
                    <div class="collapsible-content">
                        <p class="pt-4">هو الفراغ داخل الفم والحلق، ويخرج منه حروف المد الثلاثة الهوائية:</p>
                        <table class="styled-table mt-2 text-sm md:text-base">
                            <thead><tr><th>الحرف</th><th>المثال</th><th>ملاحظات</th></tr></thead>
                            <tbody>
                                <tr><td>ألف المد (ا)</td><td>قَ<strong>ا</strong>لَ</td><td>يخرج بانفتاح الفم وعدم غلق أي عضو</td></tr>
                                <tr><td>واو المد (و)</td><td>يَقُ<strong>و</strong>لُ</td><td>يخرج بانضمام الشفتين دون كزٍّ</td></tr>
                                <tr><td>ياء المد (ي)</td><td>قِ<strong>ي</strong>لَ</td><td>يخرج بانخفاض الفك السفلي قليلاً</td></tr>
                            </tbody>
                        </table>
                    </div>
        
                    <div class="collapsible-header"><h3 class="text-xl font-bold title-font" style="color: var(--text-dark);">📍 ثانيًا: مخرج الحلق</h3><span class="toggle-icon">+</span></div>
                    <div class="collapsible-content">
                        <p class="pt-4">يحتوي على ثلاثة مخارج فرعية يخرج منها ستة أحرف:</p>
                        <table class="styled-table mt-2 text-sm md:text-base">
                            <thead><tr><th>المخرج الفرعي</th><th>الحروف</th><th>مثال</th></tr></thead>
                            <tbody>
                                <tr><td>أقصى الحلق</td><td>(ء، هـ)</td><td><strong>أَ</strong>حَد، <strong>هَ</strong>دَى</td></tr>
                                <tr><td>وسط الحلق</td><td>(ع، ح)</td><td><strong>عَ</strong>لِم، <strong>حَ</strong>مِيد</td></tr>
                                <tr><td>أدنى الحلق (الأقرب للفم)</td><td>(غ، خ)</td><td><strong>غَ</strong>فُور، <strong>خَ</strong>بِير</td></tr>
                            </tbody>
                        </table>
                    </div>
        
                    <div class="collapsible-header"><h3 class="text-xl font-bold title-font" style="color: var(--text-dark);">📍 ثالثًا: مخرج اللسان</h3><span class="toggle-icon">+</span></div>
                    <div class="collapsible-content">
                        <p class="pt-4">هو أكبر المخارج وأدقها، ويخرج منه 18 حرفًا من عشرة مخارج فرعية:</p>
                        <div class="overflow-x-auto">
                            <table class="styled-table mt-2 text-sm md:text-base">
                                <thead><tr><th>المخرج الفرعي</th><th>الحروف</th><th>مثال</th></tr></thead>
                                <tbody>
                                    <tr><td>1. أقصى اللسان مع الحنك الأعلى</td><td>ق</td><td><strong>قَ</strong>الَ</td></tr>
                                    <tr><td>2. أسفل منه قليلًا</td><td>ك</td><td><strong>كَ</strong>تَبَ</td></tr>
                                    <tr><td>3. وسط اللسان مع الحنك الأعلى</td><td>ج، ش، ي (غير المدية)</td><td><strong>جَ</strong>اء، <strong>شَ</strong>مس، <strong>يَ</strong>دٌ</td></tr>
                                    <tr><td>4. أحد حافتي اللسان مع الأضراس العليا</td><td>ض</td><td><strong>ضَ</strong>رَبَ</td></tr>
                                    <tr><td>5. أدنى حافة اللسان إلى طرفه</td><td>ل</td><td><strong>لَ</strong>بَن</td></tr>
                                    <tr><td>6. طرف اللسان مع لثة الثنايا العليا</td><td>ن</td><td><strong>نُ</strong>ور</td></tr>
                                    <tr><td>7. طرف اللسان (ظهر الطرف)</td><td>ر</td><td><strong>رَ</strong>حيم</td></tr>
                                    <tr><td>8. طرف اللسان مع أصول الثنايا العليا</td><td>ط، د، ت</td><td><strong>طِ</strong>ين، <strong>دَ</strong>رَسَ، <strong>تَ</strong>ابَ</td></tr>
                                    <tr><td>9. طرف اللسان مع ما بين الثنايا</td><td>ص، ز، س</td><td><strong>صَ</strong>بَرَ، <strong>زَ</strong>ين، <strong>سَ</strong>ارَ</td></tr>
                                    <tr><td>10. طرف اللسان مع أطراف الثنايا العليا</td><td>ظ، ذ، ث</td><td><strong>ظَ</strong>لَمَ، <strong>ذَ</strong>كَرَ، <strong>ثَ</strong>وْب</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
        
                     <div class="collapsible-header"><h3 class="text-xl font-bold title-font" style="color: var(--text-dark);">📍 رابعًا: مخرج الشفتين</h3><span class="toggle-icon">+</span></div>
                    <div class="collapsible-content">
                         <p class="pt-4">يخرج منه أربعة أحرف:</p>
                        <table class="styled-table mt-2 text-sm md:text-base">
                            <thead><tr><th>المخرج</th><th>الحروف</th><th>المثال</th></tr></thead>
                            <tbody>
                                <tr><td>من بطن الشفة السفلى مع أطراف الثنايا العليا</td><td>ف</td><td><strong>فَ</strong>ضْل</td></tr>
                                <tr><td>بانطباق الشفتين معًا</td><td>ب، م</td><td><strong>بَ</strong>رَكَة، <strong>مَ</strong>ال</td></tr>
                                <tr><td>بانضمام الشفتين دون كزٍّ</td><td>و (غير المدية)</td><td><strong>وَ</strong>لَد</td></tr>
                            </tbody>
                        </table>
                    </div>
        
                    <div class="collapsible-header"><h3 class="text-xl font-bold title-font" style="color: var(--text-dark);">📍 خامسًا: مخرج الخيشوم</h3><span class="toggle-icon">+</span></div>
                    <div class="collapsible-content">
                         <p class="pt-4">هو الخُرْم الداخلي في الأنف، ويخرج منه صوت الغُنّة الملازم لحرفي النون والميم إذا أُدغما أو أُخفيا.</p>
                        <table class="styled-table mt-2 text-sm md:text-base">
                            <thead><tr><th>الحرف</th><th>المثال</th></tr></thead>
                            <tbody>
                                <tr><td>ن</td><td>إِ<strong>نَّ</strong>، مِ<strong>نْ</strong></td></tr>
                                <tr><td>م</td><td>ثُ<strong>مَّ</strong>، عَ<strong>مَّ</strong></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
        
            </div>
        </div>
        <div id="waqf-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="node text-center"> <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">باب الوقف والابتداء</h1> <p class="text-gray-400">فن معرفة المواضع التي يحسن الوقف عليها وما يحسن الابتداء به.</p> </div><div class="rule-card"><div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">أنواع الوقف الاختياري</h2></div><div class="rule-card-body space-y-4 text-base"><div><h4><strong>1. الوقف التام:</strong> هو الوقف على كلام تام المعنى، لا يتعلق بما بعده لفظًا ولا معنى. مثاله: الوقف على "نَسْتَعِينُ" في سورة الفاتحة.</h4></div><div><h4><strong>2. الوقف الكافي:</strong> هو الوقف على كلام تام المعنى، لكنه يتعلق بما بعده معنى لا لفظًا. مثاله: الوقف على "لَا رَيْبَ فِيهِ" في سورة البقرة.</h4></div><div><h4><strong>3. الوقف الحسن:</strong> هو الوقف على كلام تام المعنى، لكنه يتعلق بما بعده لفظًا ومعنى. يحسن الوقف عليه ولكن لا يحسن الابتداء بما بعده. مثاله: الوقف على "الْحَمْدُ لِلَّهِ" من قوله "الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ".</h4></div><div><h4><strong>4. الوقف القبيح:</strong> هو الوقف على كلام لم يتم معناه، أو يوهم معنى فاسدًا. لا يجوز تعمده. مثاله: الوقف على "يَا أَيُّهَا الَّذِينَ آمَنُوا لَا تَقْرَبُوا الصَّلَاةَ".</h4></div></div></div></div> </div>
        <div id="relations-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="node text-center"> <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">علاقات الحروف</h1> <p class="text-gray-400">الأحكام الناشئة عن التقاء الحروف ببعضها.</p> </div><div class="rule-card"><div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">أنواع العلاقات</h2></div><div class="rule-card-body space-y-4 text-base"><div><h4><strong>1. المثلان:</strong> الحرفان اللذان اتحدا اسمًا ورسمًا ومخرجًا وصفة. حكم إدغام الأول في الثاني إن كان الأول ساكنًا (مثلين صغير). مثاله: "اضْرِب بِّعَصَاكَ".</h4></div><div><h4><strong>2. المتجانسان:</strong> الحرفان اللذان اتحدا مخرجًا واختلفا صفة. حكمه الإدغام في أغلب الحالات إن كان الأول ساكنًا. مثاله: "قَد تَّبَيَّnَ".</h4></div><div><h4><strong>3. المتقاربان:</strong> الحرفان اللذان تقاربا مخرجًا وصفة. حكمه الإدغام في حالات خاصة. مثاله: "قُل رَّبِّ".</h4></div><div><h4><strong>4. المتباعدان:</strong> الحرفان اللذان تباعدا مخرجًا واختلفا صفة. حكمه الإظهار دائمًا.</h4></div></div></div></div> </div>
        <div id="practice-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="node text-center"> <h1 class="text-3xl md:text-4xl font-bold mb-2 title-font">التطبيق العملي</h1> <p class="text-gray-400">استخرج الأحكام بنفسك من الآيات.</p> </div><div class="rule-card text-center"><div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">تدريب على سورة الإخلاص</h2></div><div class="rule-card-body"><div class="practice-verse text-2xl md:text-4xl leading-loose md:leading-loose">
            <div class="example-item" data-audio-id="112001">
                <span class="practice-word" data-info="قُلْ: القاف مفخمة واللام مظهرة.">قُلْ</span> 
                <span class="practice-word" data-info="هُوَ: هاء مرققة.">هُوَ</span> 
                <span class="practice-word" data-info="اللَّهُ: لام لفظ الجلالة مفخمة لأن ما قبلها مضموم.">اللَّهُ</span> 
                <span class="practice-word" data-info="أَحَدٌ: الدال مقلقلة عند الوقف.">أَحَدٌ</span> (١)
            </div>
            <div class="example-item" data-audio-id="112002">
                <span class="practice-word" data-info="اللَّهُ: لام لفظ الجلالة مفخمة.">اللَّهُ</span>
                <span class="practice-word" data-info="الصَّمَدُ: الصاد مفخمة والدال مقلقلة عند الوقف.">الصَّمَدُ</span> (٢)
            </div>
            <div class="example-item" data-audio-id="112003">
                <span class="practice-word" data-info="لَمْ يَلِدْ: ميم ساكنة مظهرة (إظهار شفوي). الدال في (يَلِدْ) مقلقلة عند الوقف.">لَمْ يَلِدْ</span> 
                <span class="practice-word" data-info="وَلَمْ يُولَدْ: ميم ساكنة مظهرة (إظهار شفوي). الدال في (يُولَدْ) مقلقلة عند الوقف.">وَلَمْ يُولَدْ</span> (٣)
            </div>
             <div class="example-item" data-audio-id="112004">
                <span class="practice-word" data-info="وَلَمْ يَكُن لَّهُ: إدغام النون في اللام (إدغام كامل بلا غنة).">وَلَمْ يَكُن لَّهُ</span> 
                <span class="practice-word" data-info="كُفُوًا أَحَدٌ: تنوين بعده همزة (إظهار حلقي).">كُفُوًا أَحَدٌ</span> (٤)
            </div>
        </div><div id="practice-info" class="mt-4 p-4 rounded-md bg-amber-50 text-amber-900 border border-amber-200 hidden min-h-[50px]"></div></div></div></div> </div>
        <div id="quiz-section" class="page-section hidden"> <div class="mind-map-container p-4 md:p-8"> <div class="rule-card text-center"><div class="rule-card-header"><h2 class="rule-title text-2xl md:text-3xl">الاختبار الشامل</h2></div><div class="rule-card-body"> <p class="mb-4">هل أنت مستعد لاختبار معلوماتك؟ أدر العجلة واحصل على سؤال عشوائي!</p> <div class="wheel-container"><div id="spinner"></div><div class="arrow"></div></div> <button id="spin-btn">أدر العجلة!</button> <div id="question-display" class="hidden mt-6"><h3 id="question-text" class="text-xl font-bold text-slate-800 mb-4 text-right"></h3><div id="options-container" class="space-y-2"></div><p id="feedback-text" class="mt-4 font-bold"></p></div> </div></div> </div> </div>
    </div>

    <div id="custom-toast"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- DATA ---
            const audioData = {
                "مَنْ ءَامَنَ": "002062",
                "يَنْأَوْنَ": "006026",
                "كُلٌّ ءَامَنَ": "002285",
                "وجَنَّاتٍ أَلفَافًا": "078016",
                "أَنْهَارٌ": "002025",
                "إِنْ هُوَ": "007184",
                "جُرُفٍ هَارٍ": "009109",
                "سَلَامٌ هِيَ": "097005",
                "تَرْمِيهِمْ بِحِجَارَةٍ": "105004",
                "يَعْتَصِمْ بِاللَّهِ": "004146",
                "وَهُمْ بَارِزُونَ": "014021",
                "وَلَكُمْ مَا كَسَبْتُمْ": "002134",
                "أَطْعَمَهُمْ مِنْ جُوعٍ": "106004",
                "فِي قُلُوبِهِمْ مَرَضٌ": "002010"
            };
            const examplesData = {
                noon: {
                    hamza: { title: 'أمثلة (ء)', noun: ['"مَنْ ءَامَنَ"', '"يَنْأَوْنَ"'], tanween: ['"كُلٌّ ءَامَنَ"', '"وجَنَّاتٍ أَلفَافًا"'] }, haa: { title: 'أمثلة (هـ)', noun: ['"أَنْهَارٌ"', '"إِنْ هُوَ"'], tanween: ['"جُرُفٍ هَارٍ"', '"سَلَامٌ هِيَ"'] }, ain: { title: 'أمثلة (ع)', noun: ['"أَنْعَمْتَ"', '"مِنْ عِلْمٍ"'], tanween: ['"سَمِيعٌ عَلِيمٌ"', '"حَقِيقٌ عَلَىٰ"'] }, ha: { title: 'أمثلة (ح)', noun: ['"وَانْحَرْ"', '"يَنْحِتُونَ"'], tanween: ['"عَزِيزٌ حَكِيمٌ"', '"عَلِيمٌ حَلِيمٌ"'] }, ghain: { title: 'أمثلة (غ)', noun: ['"فَسَيُنْغِضُونَ"', '"مِنْ غِلٍّ"'], tanween: ['"عَفُوًّا غَفُورًا"', '"قَوْلاً غَيْرَ"'] }, khaa: { title: 'أمثلة (خ)', noun: ['"وَالْمُنْخَنِقَةُ"', '"مِنْ خَيْرٍ"'], tanween: ['"عَلِيمٌ خَبِيرٌ"', '"يَوْمَئِذٍ خَاشِعَةٌ"'] }, yaa: { title: 'أمثلة (ي)', noun: ['"فَمَن يَّعْمَلْ"'], tanween: ['"خَيْرٌ يَّرَهُ"', '"وُجُوهٌ يَّوْمَئِذٍ"'] }, noun: { title: 'أمثلة (ن)', noun: ['"عَن نَّفْسٍ"'], tanween: ['"آمِنَةٌ نُّعَاسًا"', '"يَوْمَئِذٍ نَّاعِمَةٌ"'] }, mim: { title: 'أمثلة (م)', noun: ['"مِن مَّالٍ"'], tanween: ['"قَوْلاً مِّن"', '"خَيْرٌ مِّنْهُ"'] }, waw: { title: 'أمثلة (و)', noun: ['"مِن وَّالٍ"'], tanween: ['"غِشَاوَةٌ وَّلَهُمْ"', '"مَعْرُوفٌ وَّمَغْفِرَةٌ"'] }, lam: { title: 'أمثلة (ل)', noun: ['"مِن لَّدُنْهُ"'], tanween: ['"هُدًى لِّلْمُتَّقِينَ"', '"رَسُولٌ لَّكُمْ"'] }, raa: { title: 'أمثلة (ر)', noun: ['"مِن رَّبِّهِمْ"'], tanween: ['"غَفُورٌ رَّحِيمٌ"', '"عِيشَةٍ رَّاضِيَةٍ"'] }, baa: { title: 'أمثلة (ب)', noun: ['"أَنۢبِئْهُمْ"', '"مِنۢ بَعْدِ"'], tanween: ['"سَمِيعٌۢ بَصِيرٌ"', '"عَلِيمٌۢ بِذَاتِ"'] }, sad: { title: 'أمثلة (ص)', noun: ['"يَنصُرُكُمْ"', '"عَن صَلاتِهِمْ"'], tanween: ['"رِيحًا صَرْصَرًا"', '"عَمَلاً صَالِحًا"'] }, thal: { title: 'أمثلة (ذ)', noun: ['"مُنذِرٌ"', '"مِن ذَهَبٍ"'], tanween: ['"شَيءٍ ذَلِكَ"', '"ظِلاًّ ذِي"'] }, thaa: { title: 'أمثلة (ث)', noun: ['"مَنثُورًا"', '"مِن ثَمَرَةٍ"'], tanween: ['"خَيْرًا ثَوَابًا"', '"قَوْلاً ثَقِيلاً"'] }, kaf: { title: 'أمثلة (ك)', noun: ['"مِنكُم"', '"عَن كَعْبَةِ"'], tanween: ['"شَيْءٍ كَبِيرٌ"', '"يَوْمَئِذٍ كَثِيرَةً"'] }, jim: { title: 'أمثلة (ج)', noun: ['"يُنجِيكُمْ"', '"مِن جُوعٍ"'], tanween: ['"خَلْقٍ جَدِيدٍ"', '"فَصَبْرٌ جَمِيلٌ"'] }, shin: { title: 'أمثلة (ش)', noun: ['"يَنشُرْ"', '"مِن شَرِّ"'], tanween: ['"عَذَابٌ شَدِيدٌ"', '"جَنَّةٍ شَرَابًا"'] }, qaf: { title: 'أمثلة (ق)', noun: ['"يَنقَلِبُ"', '"مِن قَبْلُ"'], tanween: ['"عَلِيمٌ قَدِيرٌ"', '"سَمِيعٌ قَرِيبٌ"'] }, sin: { title: 'أمثلة (س)', noun: ['"الإِنسَانُ"', '"عَن سَبِيلِ"'], tanween: ['"رَجُلاً سَلَمًا"', '"خَمْسَةٌ سَادِسُهُمْ"'] }, dal: { title: 'أمثلة (د)', noun: ['"أَندَادًا"', '"مِن دُونِ"'], tanween: ['"قِنْوَانٌ دَانِيَةٌ"', '"كَأْسًا دِهَاقًا"'] }, tah: { title: 'أمثلة (ط)', noun: ['"يَنطِقُونَ"', '"مِن طِينٍ"'], tanween: ['"بَلْدَةٌ طَيِّبَةٌ"', '"حَلالاً طَيِّبًا"'] }, zay: { title: 'أمثلة (ز)', noun: ['"أَنزَلَ"', '"مِن زَوَالٍ"'], tanween: ['"نَفْسًا زَكِيَّةً"', '"يَوْمَئِذٍ زُرْقًا"'] }, faa: { title: 'أمثلة (ف)', noun: ['"يَنفَطِرُ"', '"مِن فَضْلِ"'], tanween: ['"خَالِدًا فِيهَا"', '"عَيْنًا فِيهَا"'] }, taa: { title: 'أمثلة (ت)', noun: ['"كُنتُم"', '"عَن تِلْكَ"'], tanween: ['"جَنَّاتٌ تَجْرِي"', '"حُورٌ تِلْكَ"'] }, dhad: { title: 'أمثلة (ض)', noun: ['"مَنضُودٍ"', '"مِن ضَعْفٍ"'], tanween: ['"قَوْمًا ضَالِّينَ"', '"وُجُوهٌ ضَاحِكَةٌ"'] }, dhaa: { title: 'أمثلة (ظ)', noun: ['"يَنظُرُونَ"', '"مِن ظَهِيرٍ"'], tanween: ['"ظِلاًّ ظَلِيلاً"', '"سَحَابٌ ظُلُمَاتٌ"'] }
                },
                meem: {
                    'baa-meem': { title: 'أمثلة (ب)', examples: ['"تَرْمِيهِ<strong>مْ بِ</strong>حِجَارَةٍ"', '"يَعْتَصِ<strong>مْ بِ</strong>اللهِ"', '"وَهُ<strong>مْ بَ</strong>ارِزُونَ"'] },
                    'mim-meem': { title: 'أمثلة (م)', examples: ['"وَلَكُ<strong>مْ مَّ</strong>ا كَسَبْتُمْ"', '"أَطْعَمَهُ<strong>مْ mِّ</strong>نْ جُوعٍ"', '"فِي قُلُوبِهِ<strong>مْ مَّ</strong>رَضٌ"'] }
                }
            };
            const chapterOrder = ['noon-sakinah-section', 'meem-sakinah-section', 'madd-section', 'sifaat-section', 'makharij-section', 'waqf-section', 'relations-section', 'practice-section', 'quiz-section'];

            // --- DOM ELEMENTS ---
            const introPage = document.getElementById('intro-page');
            const mainContentArea = document.getElementById('main-content-area');
            const mainContentBody = document.getElementById('main-content-body');
            const chapterContent = document.getElementById('chapter-content');
            const chapterBody = document.getElementById('chapter-body');
            const allContentHolder = document.getElementById('all-content');
            
            const mainContentTemplate = allContentHolder.querySelector('#main-content-template');
            const footerTemplate = allContentHolder.querySelector('#footer-template footer');
            const body = document.body;

            // --- INITIALIZATION ---
            if (mainContentBody && mainContentTemplate) {
                mainContentBody.appendChild(mainContentTemplate.cloneNode(true));
            }
            if (mainContentArea && footerTemplate) {
                mainContentArea.appendChild(footerTemplate.cloneNode(true));
            }
            
            // --- FUNCTIONS ---
            function switchView(outgoing, incoming) {
                if (!outgoing || !incoming) return;
                outgoing.classList.add('fade-out');
                
                setTimeout(() => {
                    outgoing.classList.add('hidden');
                    outgoing.classList.remove('fade-out');
                    
                    incoming.classList.remove('hidden');
                    void incoming.offsetWidth;
                    incoming.classList.remove('fade-out');
                    window.scrollTo(0, 0);
                }, 300);
            }

            function reinitializeEventListeners(container) {
                 container.querySelectorAll('.collapsible-header').forEach(header => {
                    header.addEventListener('click', () => {
                        header.classList.toggle('active');
                        const content = header.nextElementSibling;
                        if (content.style.maxHeight) {
                            content.style.maxHeight = null;
                        } else {
                            content.style.maxHeight = content.scrollHeight + "px";
                        }
                    });
                });
                addAudioIconsToExamples(container);
            }
            
            function showToast(message) {
                const toast = document.getElementById('custom-toast');
                if (!toast) return;
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            let audioPlayer = new Audio(); // Global audio player

            function playAudio(audioId) {
                if (!audioId || audioId === 'undefined') {
                    showToast('لا يوجد ملف صوتي لهذا المثال حالياً');
                    return;
                }
                const audioSrc = `https://everyayah.com/data/Al-Husary_128kbps/${audioId}.mp3`;
                
                if (audioPlayer.src === audioSrc && !audioPlayer.paused) {
                    audioPlayer.pause();
                    audioPlayer.currentTime = 0;
                } else {
                    audioPlayer.src = audioSrc;
                    audioPlayer.play().catch(e => {
                        console.error("Error playing audio:", e);
                        showToast('حدث خطأ أثناء تحميل الصوت');
                    });
                }
            }
            
            function addAudioIconsToExamples(container) {
                container.querySelectorAll('.example-item').forEach(item => {
                    if (item.querySelector('.audio-icon')) return;
                    
                    const exampleText = item.textContent.replace(/\(\d+\)/g, '').trim();
                    const audioId = item.dataset.audioId || audioData[exampleText];

                    if(audioId) {
                        const icon = document.createElement('button');
                        icon.type = 'button';
                        icon.innerHTML = `🔊`;
                        icon.classList.add('audio-icon', 'text-xl');
                        icon.dataset.audioId = audioId;
                        item.prepend(icon);
                    }
                });
            }

            function navigateChapter(direction) {
                const currentChapter = chapterBody.querySelector('.page-section');
                if (!currentChapter) return;
                const currentIndex = chapterOrder.indexOf(currentChapter.id);
                const newIndex = currentIndex + direction;

                if (newIndex >= 0 && newIndex < chapterOrder.length) {
                    const nextChapterId = chapterOrder[newIndex];
                    const nextChapter = allContentHolder.querySelector(`#${nextChapterId}`);
                    chapterBody.innerHTML = '';
                    chapterBody.appendChild(nextChapter.cloneNode(true));
                    chapterBody.querySelector('.page-section').classList.remove('hidden');
                    reinitializeEventListeners(chapterBody);
                    updateNavButtons();
                    window.scrollTo(0,0);
                }
            }

            function updateNavButtons() {
                const prevChapterBtn = document.getElementById('prev-chapter-btn');
                const nextChapterBtn = document.getElementById('next-chapter-btn');
                const currentChapter = chapterBody.querySelector('.page-section');
                if (!currentChapter || !prevChapterBtn || !nextChapterBtn) return;
                const currentIndex = chapterOrder.indexOf(currentChapter.id);
                prevChapterBtn.disabled = currentIndex === 0;
                nextChapterBtn.disabled = currentIndex === chapterOrder.length - 1;
            }

            function initializeQuiz(container) {
                if (!container) return;
                const spinner = container.querySelector('#spinner');
                const spinBtn = container.querySelector('#spin-btn');
                const questionDisplay = container.querySelector('#question-display');
                
                if (!spinBtn || !spinner || !questionDisplay) return;

                let currentRotation = 0;
                let currentQuestion = {};
                const quizQuestions = [
                     { q: "ما حكم الميم في قوله تعالى 'لَكُمْ دِينُكُمْ'؟", o: ["إظهار شفوي", "إدغام شفوي", "إخفاء شفوي"], a: "إظهار شفوي" }, { q: "ما حكم الميم في قوله تعالى 'تَرْمِيهِمْ بِحِجَارَةٍ'؟", o: ["إخفاء شفوي", "إظهار شفوي", "إدغام"], a: "إخفاء شفوي" }, { q: "ما حكم النون في قوله تعالى 'مِنْ خَيْرٍ'؟", o: ["إظهار حلقي", "إدغام بغنة", "إخفاء"], a: "إظهار حلقي" }, { q: "ما حكم التنوين في قوله تعالى 'غَفُورٌ رَّحِيمٌ'؟", o: ["إدغام بغنة", "إدغام بلا غنة", "إقلاب"], a: "إدغام بلا غنة" }, { q: "أي من الكلمات التالية بها حكم الإقلاب؟", o: ["أَنْعَمْتَ", "مِنْ بَعْدِ", "مَنْ يَعْمَل"], a: "مِنْ بَعْدِ" }, { q: "ما حكم النون في قوله تعالى 'كُنْتُمْ'؟", o: ["إظهار", "إدغام", "إخفاء حقيقي"], a: "إخفاء حقيقي" }, { q: "ما نوع المد في كلمة 'السَّمَاء' عند الوقف عليها؟", o: ["مد متصل", "مد منفصل", "مد عارض للسكون"], a: "مد متصل" }, { q: "حروف القلقلة مجموعة في عبارة:", o: ["خص ضغط قظ", "قطب جد", "يرملون"], a: "قطب جد" }, { q: "من أين مخرج حرفي 'الهمزة' و 'الهاء'؟", o: ["أدنى الحلق", "وسط الحلق", "أقصى الحلق"], a: "أقصى الحلق" },
                ];
                function showQuestion() {
                    currentQuestion = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
                    const questionText = questionDisplay.querySelector('#question-text');
                    const optionsContainer = questionDisplay.querySelector('#options-container');
                    const feedbackText = questionDisplay.querySelector('#feedback-text');

                    questionDisplay.classList.remove('hidden');
                    questionText.textContent = currentQuestion.q;
                    optionsContainer.innerHTML = '';
                    feedbackText.textContent = '';
                    currentQuestion.o.forEach(option => {
                        const button = document.createElement('button');
                        button.textContent = option;
                        button.classList.add('option-btn');
                        button.onclick = () => checkAnswer(option, button);
                        optionsContainer.appendChild(button);
                    });
                }
                function checkAnswer(selectedOption, btn) {
                    const optionsContainer = questionDisplay.querySelector('#options-container');
                    const feedbackText = questionDisplay.querySelector('#feedback-text');
                    Array.from(optionsContainer.children).forEach(child => child.disabled = true);
                    if (selectedOption === currentQuestion.a) {
                        feedbackText.textContent = 'إجابة صحيحة! أحسنت.';
                        feedbackText.style.color = '#34d399';
                        btn.style.backgroundColor = '#d1fae5';
                        btn.style.borderColor = '#34d399';
                        btn.style.color = '#065f46';
                    } else {
                        feedbackText.textContent = `إجابة خاطئة. الصحيح هو: ${currentQuestion.a}`;
                        feedbackText.style.color = '#f87171';
                        btn.style.backgroundColor = '#fee2e2';
                        btn.style.borderColor = '#f87171';
                        btn.style.color = '#991b1b';
                    }
                }
                spinBtn.addEventListener('click', () => {
                    spinBtn.disabled = true;
                    questionDisplay.classList.add('hidden');
                    const randomSpins = Math.floor(Math.random() * 5) + 5;
                    const randomStop = Math.floor(Math.random() * 360);
                    currentRotation += (randomSpins * 360) + randomStop;
                    spinner.style.transform = `rotate(${currentRotation}deg)`;
                    setTimeout(() => { spinBtn.disabled = false; showQuestion(); }, 4000);
                });
            }

            document.addEventListener('click', function(e) {
                const target = e.target;
                
                if(target.closest('#start-btn')) {
                    switchView(introPage, mainContentArea);
                    return;
                }

                if(target.closest('#back-to-intro-btn')) {
                    const currentVisible = mainContentArea.classList.contains('hidden') ? chapterContent : mainContentArea;
                    switchView(currentVisible, introPage);
                    return;
                }

                if(target.closest('#back-to-hub')) {
                    switchView(chapterContent, mainContentArea);
                    return;
                }

                const hubCard = target.closest('.hub-card');
                if(hubCard) {
                    const targetId = hubCard.dataset.target;
                    const targetSection = allContentHolder.querySelector(`#${targetId}`);
                    if (targetSection) {
                        switchView(mainContentArea, chapterContent);
                        chapterBody.innerHTML = '';
                        chapterBody.appendChild(targetSection.cloneNode(true));
                        chapterBody.querySelector('.page-section').classList.remove('hidden');
                        
                        const newChapterFooter = footerTemplate.cloneNode(true);
                        chapterContent.appendChild(newChapterFooter);
                        
                        reinitializeEventListeners(chapterBody);
                        updateNavButtons();
                    }
                    return;
                }
                
                if (target.closest('#creator-info-toggle')) {
                    const creatorInfoPanel = document.getElementById('creator-info-panel');
                    target.closest('#creator-info-toggle').classList.toggle('active');
                    creatorInfoPanel.classList.toggle('open');
                }

                if (target.closest('#increase-font')) {
                    let currentFontSize = parseFloat(window.getComputedStyle(body).fontSize);
                    body.style.fontSize = `${currentFontSize + 1}px`;
                }

                if (target.closest('#decrease-font')) {
                    let currentFontSize = parseFloat(window.getComputedStyle(body).fontSize);
                    body.style.fontSize = `${Math.max(12, currentFontSize - 1)}px`;
                }

                if (target.closest('#contrast-toggle')) {
                    body.classList.toggle('high-contrast');
                }
                
                if (target.closest('#search-btn')) {
                    document.getElementById('search-bar').classList.toggle('active');
                }

                if (target.closest('#prev-chapter-btn')) navigateChapter(-1);
                if (target.closest('#next-chapter-btn')) navigateChapter(1);

                const letterNode = target.closest('.letter-node');
                if (letterNode) {
                    const letter = letterNode.dataset.letter;
                    const parent = letterNode.dataset.parent;
                    if (examplesData[parent] && examplesData[parent][letter]) {
                        const data = examplesData[parent][letter];
                        const parentCard = letterNode.closest('.rule-card');
                        if (parentCard) {
                            const examplesContainer = parentCard.querySelector('.examples-container');
                            if (examplesContainer) {
                                parentCard.querySelectorAll('.letter-node').forEach(n => n.classList.remove('active'));
                                letterNode.classList.add('active');
                                
                                let examplesHtml = '';
                                if (data.examples) { examplesHtml = data.examples.map(ex => `<div class="example-item">${ex}</div>`).join(''); }
                                else { examplesHtml = `<div><p class="example-title">مع النون الساكنة:</p>${data.noun.map(ex => `<div class="example-item">${ex}</div>`).join('')}</div><div class="mt-4 pt-4 border-t border-amber-200/20"><p class="example-title">مع التنوين:</p>${data.tanween.map(ex => `<div class="example-item">${ex}</div>`).join('')}</div>`; }
                                examplesContainer.innerHTML = `<div class="example-panel"><h4 class="text-xl font-bold mb-4">${data.title}</h4>${examplesHtml}</div>`;
                                addAudioIconsToExamples(examplesContainer);
                            }
                        }
                    }
                }

                const audioIcon = target.closest('.audio-icon');
                if (audioIcon) {
                    const audioId = audioIcon.dataset.audioId;
                    playAudio(audioId);
                    return;
                }
            });
            
            reinitializeEventListeners(document.body);
            initializeQuiz(document.getElementById('quiz-section'));
        });
    </script>
</body>
</html>

